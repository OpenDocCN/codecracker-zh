# C++内存映射

> 原文：<https://codescracker.com/cpp/cpp-memory-map.htm>

由于指针与内存有着密切的关系，因为它们存储内存位置的地址，并且它们也促进了 C++的动态内存分配例程，所以我们必须理解 C++为其程序组织内存的方式。编译程序后，C++创建四个逻辑上不同的内存区域，用于四个不同的特定功能。

*   内存中的一个区域保存程序的编译代码。程序的每一条指令和每一个功能都从一个特定的地址开始。
*   下一个区域是存储程序全局变量的内存区域。只要程序继续，全局变量就一直保留在内存中。
*   第三个区域被称为堆栈，在你的程序执行时用于很多事情。堆栈用于保存函数调用的返回地址、传递给函数的参数以及函数的局部变量。只要函数继续运行，局部变量就会保留在内存中，此后，它们就会从内存中被删除。堆栈还存储 CPU 的当前状态。
*   堆内存区是一个空闲内存区域，通过 C++的动态内存分配函数从中分配内存块。

## C++中内存的动态和静态分配

计算机的黄金法则是，任何需要处理的东西(数据或指令)都必须在处理之前装入内存。因此，每个正在执行的数据和指令都必须在主(内部)内存中分配一些区域。主(内部)内存通过以下两种方式分配:

*   静态地
*   动态地

### C++中的静态内存分配

当预先知道要分配的内存量，并且在编译过程中分配内存时，这被称为静态内存分配。例如，当您如下声明一个变量时:

```
short avar ;
```

然后，在这种情况下，计算机知道短变量的长度是多少。一般是 2 个字节。因此，在编译过程中，一块 2 字节的内存将被分配给变量 avar。因此，这是静态内存分配的一个例子。

### C++中的动态内存分配

当要分配的内存量事先不知道，而是需要在运行时(当程序实际执行时)自己分配(主)内存时，运行时的内存分配称为动态内存分配。

C++为动态内存分配提供了这两个运算符:

*   新的
*   删除

操作符 new 动态地分配内存，并返回一个存储所分配内存的内存地址的指针。操作符 delete 通过给定的指针释放内存(new 的反向)指针。

[C++在线测试](/exam/showtest.php?subid=3)

* * *

* * *